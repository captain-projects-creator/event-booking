<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Event Booking â€” Calendar + Available Events</title>

    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />

    <!-- Your styles -->
    <link rel="stylesheet" href="styles.css" />
</head>
<body>

<header class="site-header" role="banner" aria-label="Top header">
    <div class="header-inner" role="navigation">
        <div style="display:flex;align-items:center;gap:18px;">
            <h1 class="site-title">Event Booking System</h1>
            <nav class="nav" aria-label="Main navigation">
                <a id="navHome" href="index.html">Home</a>
                <a id="navAdmin" href="admin.html" style="display:none;">Admin</a>
                <a id="navTickets" href="my_tickets.html">My Tickets</a>
            </nav>
        </div>

        <button id="themeToggle" class="btn small" title="Toggle theme">ðŸŒ™</button>

        <div id="rightControls" aria-hidden="false">
            <span id="welcomeMsg" style="display:none;"></span>
            <button id="logoutBtn" style="display:none;">Logout</button>
        </div>
    </div>

    <!-- USER ICON (top-right fixed) -->
    <button id="userIcon" aria-haspopup="true" aria-expanded="false" title="Account" aria-label="Open account panel">
        <svg width="40" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zM4 20c0-3.866 3.582-7 8-7s8 3.134 8 7v1H4v-1z" fill="#1f2937"/>
        </svg>
    </button>

    <div id="userPanel" role="dialog" aria-hidden="true" aria-label="Account panel">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
            <strong id="panelTitle">Login</strong>
            <button id="closeUserPanel" aria-label="Close" style="background:transparent;border:none;font-size:20px;cursor:pointer;">&times;</button>
        </div>

        <div style="display:flex;gap:8px;margin-bottom:12px;">
            <button id="tabLogin" class="small-tab active" type="button">Login</button>
            <button id="tabRegister" class="small-tab" type="button">Register</button>
        </div>

        <div id="profileView" style="display:none;">
            <div style="margin-bottom:12px;">
                <div style="font-size:13px;color:#6b7280;">Signed in as</div>
                <div id="profileUsername" style="font-weight:700;font-size:16px;margin-top:6px;color:#111827;"></div>
            </div>

            <div style="display:flex;flex-direction:column;gap:8px;">
                <a id="myTicketsLink" href="my_tickets.html" class="btn" style="text-align:center;text-decoration:none;display:block;">My Tickets</a>
                <a id="adminLink" href="admin.html" class="btn secondary" style="text-align:center;text-decoration:none;display:none;">Admin</a>
                <button id="profileLogoutBtn" class="btn" style="background:#ef4444;border:none;color:#fff;">Logout</button>
            </div>
        </div>

        <form id="miniLoginForm" style="display:block;" onsubmit="return false;">
            <input id="miniUsername" placeholder="Username" required />
            <input id="miniPassword" type="password" placeholder="Password" required />
            <div style="display:flex;gap:8px;margin-top:12px;">
                <button id="miniLoginBtn" type="button" class="btn">Login</button>
            </div>
            <div id="miniLoginMsg" style="margin-top:8px;color:#b91c1c"></div>
        </form>

        <form id="miniRegisterForm" style="display:none;" onsubmit="return false;">
            <input id="regUsername" placeholder="Username" required />
            <input id="regPassword" type="password" placeholder="Password" required />
            <input id="regPassword2" type="password" placeholder="Repeat password" required />
            <input id="regMobile" placeholder="Mobile number (optional)" />
            <div style="display:flex;gap:8px;margin-top:12px;">
                <button id="miniRegisterBtn" type="button" class="btn">Register</button>
            </div>
            <div id="miniRegisterMsg" style="margin-top:8px;color:#b91c1c"></div>
        </form>
    </div>
</header>

<main class="layout" role="main" aria-live="polite">
    <!-- LEFT: Calendar -->
    <section class="left" aria-labelledby="calendar-heading">
        <h2 id="calendar-heading" class="visually-hidden">Calendar</h2>
        <div id="calendar" role="region" aria-label="Events calendar"></div>
    </section>

    <!-- RIGHT: Available events list -->
    <aside class="right" aria-labelledby="events-heading">
        <div class="right-card" style="padding:16px;">
            <h2 id="events-heading">Available Events</h2>

            <label for="searchInput" class="visually-hidden">Search events</label>
            <div class="search-wrap" role="search" aria-label="Search events">
                <div class="search-icon" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M21 21l-4.35-4.35" stroke="#2563EB" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="11" cy="11" r="6.2" stroke="#2563EB" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>

                <input id="searchInput" type="search" placeholder="Search events by title, date or locationâ€¦" aria-label="Search events" />
                <button id="clearSearch" class="clear-btn" type="button" title="Clear search" aria-label="Clear search" style="display:none">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>

            <div id="loading" class="muted" style="margin-top:12px;">Loading...</div>
            <div id="message" role="status" style="margin-top:8px;color:#b91c1c;"></div>

            <!-- this is the element your JS expects to render list into -->
            <ul id="availableList" class="event-list" aria-live="polite" style="margin-top:12px;"></ul>
        </div>
    </aside>
</main>

<!-- FullCalendar + app logic -->
<script defer src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<script defer src="app.js"></script>
<script>
    // small theme toggle (stores state in localStorage)
    document.getElementById("themeToggle").addEventListener("click", () => {
      document.body.classList.toggle("dark");
      localStorage.setItem('theme-dark', document.body.classList.contains('dark') ? '1' : '0');
    });
    if (localStorage.getItem('theme-dark') === '1') document.body.classList.add('dark');
</script>
</body>
</html>